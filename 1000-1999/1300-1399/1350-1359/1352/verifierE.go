package main

import (
	"bufio"
	"bytes"
	"fmt"
	"os"
	"os/exec"
	"strconv"
	"strings"
)

const testcasesRaw = `100
16
5 12 16 3 1 16 9 8 7 16 16 13 5 8 5 13
48
1 43 5 11 38 3 20 2 18 31 39 47 25 46 28 26 47 37 29 9 24 7 3 9 32 14 17 44 28 41 20 27 33 25 37 23 35 38 27 38 15 22 44 2 18 39 43 45
11
6 9 10 10 2 11 4 11 10 5 5
8
2 8 8 2 6 2 7 3
2
2 2
50
27 8 3 39 40 49 3 25 46 38 22 36 18 33 16 3 20 1 5 7 39 35 3 13 27 19 40 17 10 45 3 22 21 24 9 25 25 30 34 25 42 39 44 36 7 40 33 18 28 41
47
46 16 20 28 17 34 20 36 22 1 27 38 21 2 25 40 38 41 9 4 41 41 22 30 23 44 23 39 46 18 32 2 38 4 44 2 24 17 41 30 20 38 39 21 12 24 12
21
12 20 9 10 13 4 1 19 5 10 17 8 21 9 8 11 6 14 21 4 4
39
21 22 15 29 11 6 22 14 37 29 18 15 8 3 34 13 21 37 12 18 22 6 23 38 9 27 19 34 18 30 23 27 19 27 37 27 3 27 10
13
1 8 10 9 7 9 12 4 1 12 8 13 11
48
34 19 35 22 15 5 38 19 8 16 3 3 45 33 13 28 37 4 1 31 48 8 11 33 20 16 43 2 34 35 27 4 40 8 22 9 17 35 31 4 23 15 13 8 35 8 11 16
18
5 1 16 13 2 9 8 9 17 17 14 2 16 11 1 2 5 2
8
1 2 8 1 2 8 6 3
21
3 12 13 21 13 19 10 12 9 7 11 14 4 5 18 1 13 3 19 6 2
24
15 20 21 18 13 21 2 20 14 2 12 21 16 23 11 14 23 14 15 1 8 7 18 9
45
38 5 28 15 28 9 2 21 24 36 17 8 30 45 8 43 34 25 43 7 21 37 35 7 38 1 31 10 16 25 3 34 6 37 7 43 25 12 2 22 8 2 8 44 31
45
19 38 20 6 3 37 33 34 16 7 36 7 36 4 36 21 37 12 5 16 12 42 16 30 40 45 26 17 24 39 26 23 36 27 6 25 33 16 27 11 27 45 37 38 44
34
31 10 26 10 11 7 32 31 34 29 12 9 18 13 10 33 21 15 19 27 18 14 20 2 18 31 25 13 12 24 16 21 31 10
27
23 16 23 20 7 15 19 27 27 21 18 1 16 24 3 13 26 24 2 15 8 8 21 23 25 22 3
14
3 3 8 2 11 8 12 5 13 13 7 8 10 1
28
16 24 22 14 23 24 7 17 21 12 24 11 8 23 16 2 17 10 6 12 4 11 18 22 24 5 20 17
20
13 15 13 2 20 14 11 13 15 4 20 13 2 8 6 13 20 12 7 7
15
6 9 4 15 13 6 10 9 9 6 6 1 13 13 15
36
4 3 23 2 18 18 22 19 20 35 30 24 34 36 14 4 26 2 21 36 5 16 23 13 31 26 5 36 2 35 12 33 32 32 3 20
3
3 1 3
36
35 13 14 31 35 4 14 19 16 20 1 24 11 9 28 2 21 18 18 17 22 5 12 26 12 10 27 23 1 26 26 7 19 17 27 16
15
5 13 2 11 11 15 10 15 3 2 12 14 5 15 3
33
26 21 15 18 28 25 13 4 10 14 16 24 17 28 19 26 18 20 24 30 28 26 25 2 20 23 5 14 5 14 13 33 20
49
47 35 22 17 32 17 42 6 13 18 27 32 20 14 19 31 30 8 41 24 19 46 6 41 18 40 4 15 27 7 33 4 32 32 44 7 36 13 5 44 29 41 35 40 23 37 18 25 18
36
16 2 14 33 12 7 28 1 21 15 10 35 10 26 4 27 28 12 6 29 29 33 25 30 33 16 5 15 16 1 23 30 8 10 14 26
13
1 2 4 7 7 5 6 2 12 11 9 9 10
45
5 41 33 33 1 25 1 23 10 34 23 6 43 14 23 22 42 3 17 5 10 17 30 40 28 6 35 24 32 32 12 18 18 41 6 42 27 42 12 36 33 31 26 11 32
46
3 32 38 16 9 8 46 33 19 29 34 39 25 24 9 8 42 13 34 1 18 17 28 43 23 37 39 31 2 3 31 18 42 7 17 37 17 7 46 45 20 45 9 12 6 14
40
37 14 10 17 13 35 25 18 12 2 22 25 14 27 6 21 3 34 35 5 37 12 19 31 10 29 34 12 29 4 10 32 13 20 29 29 35 7 27 15
7
5 5 6 6 6 2 7
21
21 8 4 7 5 12 10 13 18 18 8 1 21 17 8 20 16 14 20 19 9
21
5 16 7 1 5 16 7 17 9 17 11 3 6 11 16 14 3 16 7 18 3
14
1 7 12 5 12 14 8 2 4 14 5 5 1 7
29
14 2 9 15 14 16 20 16 8 24 5 1 10 24 23 20 26 14 17 2 27 1 13 19 15 1 11 2 25
23
2 5 21 20 15 14 15 18 20 14 5 20 17 14 3 17 17 7 6 16 21 1 13
37
28 12 26 33 37 29 10 27 11 16 20 14 18 2 4 12 33 5 22 1 17 32 30 9 37 31 2 19 30 21 4 27 8 36 3 5 32
17
8 15 10 16 7 9 9 6 5 4 4 9 17 8 11 4 3
27
23 3 6 2 9 21 22 21 17 24 25 9 20 27 4 5 9 8 21 23 13 18 2 17 10 1 1
40
30 23 40 25 35 37 38 18 34 35 2 29 39 17 7 26 13 32 11 35 31 36 1 7 30 36 27 30 37 5 24 3 27 24 38 38 3 40 36 31
7
2 5 6 3 5 3 4
40
22 27 16 35 33 20 3 4 5 32 40 21 29 26 39 13 24 21 7 22 23 39 34 25 35 40 23 22 25 3 9 16 4 21 22 18 39 30 8 5
6
2 1 2 6 3 1
41
13 6 37 28 21 30 31 5 19 7 26 31 26 24 34 36 33 41 10 11 13 16 2 17 28 7 15 17 17 27 39 11 26 28 5 8 15 3 2 14 27
10
6 7 9 2 4 4 8 7 8 5
24
21 8 7 16 22 11 19 17 11 6 18 13 24 8 24 10 15 4 12 15 4 10 20 9
40
5 36 12 4 19 24 4 15 1 33 21 19 14 40 9 3 9 25 10 33 11 40 27 40 40 8 35 9 10 32 21 28 19 34 33 24 33 32 7 35
33
15 3 14 28 20 4 17 13 8 31 7 9 26 4 12 23 1 23 11 16 18 25 26 7 5 14 21 9 8 17 9 4 11
33
24 30 14 29 5 13 26 29 21 33 24 27 26 2 20 8 26 9 2 20 4 30 26 11 13 24 5 26 19 16 28 3 23
10
3 10 3 9 8 7 9 6 6 1
22
22 11 8 12 8 14 9 16 9 10 18 9 8 10 16 10 1 7 6 8 21 5
48
8 28 46 25 43 38 16 7 16 14 31 42 43 4 37 40 37 42 9 43 7 30 37 45 23 45 45 11 44 8 9 7 37 6 44 9 34 15 41 9 21 21 33 42 4 1 1 11
37
2 33 30 4 17 30 26 1 26 30 17 17 33 2 17 37 3 28 8 8 8 36 2 11 14 34 21 2 20 31 28 19 6 20 22 4 24
30
29 23 18 2 16 8 22 27 30 20 9 20 18 8 10 20 13 18 22 2 4 24 6 29 12 28 6 22 25 21
32
19 32 17 23 6 24 23 10 19 7 2 10 19 12 31 32 7 5 2 12 7 5 27 27 12 18 10 2 24 30 16 21
36
19 16 4 12 21 18 17 33 31 23 36 34 10 7 12 9 9 14 9 16 17 36 19 7 34 19 31 25 15 22 29 4 32 9 32 3
6
4 2 3 4 6 1
44
22 21 14 31 17 13 37 3 44 16 5 18 43 41 36 6 18 23 5 17 16 29 36 18 36 2 40 7 21 7 38 36 31 28 23 1 14 3 28 33 24 20 22 23
15
10 5 3 5 4 13 6 9 8 11 8 5 5 8 6
14
12 1 7 6 10 8 3 4 4 6 2 13 7 2
34
18 1 17 17 10 31 23 19 25 20 14 33 13 34 32 23 8 29 26 22 5 9 1 29 30 9 10 22 1 2 11 23 8 16
27
25 12 19 20 25 18 5 12 1 4 10 13 15 5 23 18 19 20 20 23 7 23 8 12 12 23 18
5
5 1 5 5 2
26
16 16 23 6 11 16 17 18 1 22 14 6 16 8 17 23 4 16 26 20 20 18 15 18 8 26
3
1 2 3
45
42 17 13 35 1 3 21 22 38 29 39 12 39 30 42 44 15 22 9 35 32 18 7 45 17 19 12 13 39 4 18 12 8 39 34 24 45 20 32 26 18 14 10 30 4
24
5 22 18 5 6 1 10 10 4 12 18 5 12 23 5 14 7 14 10 20 1 1 21 5
20
13 19 18 16 19 16 4 3 13 19 6 13 11 10 7 7 16 7 20 2
1
1
34
23 16 11 2 26 5 1 15 11 7 18 6 13 31 12 19 26 24 10 21 27 16 10 20 32 20 33 5 6 3 5 12 4 10
10
1 10 4 6 8 8 5 3 6 2
10
8 7 10 3 8 9 7 8 2 7
15
1 15 13 8 12 3 8 3 3 2 1 7 12 12 8
21
18 1 16 12 18 18 2 5 14 7 1 1 15 6 11 19 9 7 10 12 21
21
14 2 8 21 18 2 14 13 9 11 11 16 5 5 20 20 1 1 9 15 12
26
24 22 5 13 11 9 17 15 12 18 10 17 2 26 11 10 2 1 26 8 23 3 9 24 22 22
16
5 1 2 12 2 13 9 15 9 9 7 10 8 8 10 7
21
10 14 13 15 1 10 17 16 16 4 21 6 9 21 12 11 11 19 10 15 21
2
1 1
42
40 15 23 25 39 2 32 12 11 42 39 29 41 23 18 6 7 33 14 6 33 16 16 36 24 18 17 24 9 11 11 20 18 29 38 30 8 7 16 30 34 16
46
43 18 22 10 46 35 39 32 39 20 22 8 1 5 20 43 15 3 3 29 20 18 17 16 42 17 44 38 41 43 27 13 23 3 22 9 8 32 35 28 25 23 28 3 42 32
11
10 10 6 3 9 10 10 6 6 6 8
15
14 15 14 1 10 4 6 11 12 12 5 12 9 1 7
13
8 12 10 11 13 9 9 6 1 10 6 5 11
12
4 10 3 12 5 10 12 2 1 1 7 6
27
8 9 16 13 6 23 8 27 17 16 12 27 2 12 14 8 10 22 8 7 5 7 5 9 26 23 2
4
2 4 2 1
18
13 14 10 11 1 13 12 12 9 1 14 13 6 1 14 7 15 3
19
6 11 9 4 5 16 18 6 13 14 17 10 16 17 14 6 12 12 19
38
9 23 31 5 14 36 23 8 19 5 34 20 15 13 37 17 12 36 12 12 20 28 35 30 12 15 24 1 18 25 33 19 34 9 13 11 33 25
40
10 24 8 11 34 18 30 7 22 35 20 8 26 37 21 32 4 15 23 8 2 11 16 2 14 34 30 35 34 5 21 18 26 16 14 21 13 17 32 35
17
12 12 17 9 14 7 13 12 15 11 2 15 7 15 15 10 11
18
9 16 10 12 1 5 2 5 3 16 4 8 14 2 3 13 7 5
16
16 15 10 1 10 5 12 12 2 11 1 12 12 12 14 2
22
5 4 21 22 17 6 6 22 12 22 12 2 10 16 12 14 3 18 7 15 3 3
42
33 26 12 20 11 14 16 17 41 39 3 5 6 42 12 20 39 34 22 20 30 13 25 33 39 14 15 26 13 22 22 34 2 24 16 9 26 5 9 26 37 10
42
11 32 2 17 22 27 36 20 2 32 22 12 26 7 1 32 16 27 23 22 39 11 17 25 22 18 10 35 2 26 40 13 10 13 35 20 6 7 12 14 4 13
30
30 1 25 18 17 16 8 8 4 10 30 14 7 25 22 30 9 22 15 19 11 1 16 10 8 2 8 6 23 25
4
1 4 2 4
5
5 5 5 5 5
27
19 18 10 12 13 17 12 10 2 20 16 24 23 24 7 4 12 1 10 15 13 1 16 4 10 18 27
22
4 9 6 21 19 4 10 9 15 1 11 4 17 20 4 22 12 4 20 20 5 20
19
19 9 15 11 8 5 2 14 6 17 5 4 1 16 13 4 6 16 12
20
3 5 1 5 14 13 19 17 9 16 9 5 14 10 16 15 8 7 13 16
40
4 19 17 12 7 27 31 20 4 9 40 7 6 25 26 12 12 19 7 11 11 30 4 8 32 19 18 36 12 14 35 22 23 32 2 29 40 6 19 31
40
31 40 16 33 33 21 39 19 9 17 33 24 34 31 24 39 18 36 10 19 30 22 14 6 4 37 27 15 24 34 19 17 25 20 23 6 38 28 38 12
8
20 11 8 13 4 15 17 5
19
16 13 18 13 6 14 6 9 11 6 8 17 13 13 4 2 3 4 15
18
16 16 10 10 5 10 19 3 13 2 4 7 8 3 6 13 17 17 5 6
6
6 3 5 5 1 4
5
3 4 1 4 3
36
26 28 30 22 2 21 20 31 17 31 17 14 23 7 17 31 27 31 13 22 4 16 4 26 16 25 12 21 7 12 33 29 17 28 27 22
25
14 2 12 24 25 13 12 24 13 9 17 8 5 8 7 25 20 1 21 14 24 4 20 25 13
31
16 13 17 17 18 14 20 7 16 13 2 21 18 23 6 30 1 7 19 29 22 26 31 23 4 27 5 13 25 17 29
8
2 2 4 5 3 7 7 3
11
4 11 7 8 6 11 8 9 1 5 9
2
2 2
36
25 14 8 19 13 6 14 25 16 15 22 15 6 22 36 20 14 35 14 36 26 1 33 20 16 10 18 5 17 23 14 19 10 23 14 13
41
36 8 30 28 17 4 35 26 17 38 19 34 13 29 14 20 23 6 7 27 26 23 38 16 17 8 39 37 8 2 12 21 23 39 11 15 21 4 8 21 39
35
5 27 22 19 2 32 29 29 11 31 1 8 11 24 31 18 25 34 13 30 25 31 24 24 1 35 22 31 32 35 29 1 31 5 20
12
4 9 2 11 3 3 12 5 6 2 6 9
1
1
22
1 20 2 13 6 4 21 17 15 12 16 1 15 22 14 21 18 3 4 3 22 3
13
2 5 2 11 6 1 13 4 1 12 8 1 2
33
14 21 29 20 21 1 13 1 14 28 9 23 29 27 31 9 20 19 5 15 11 22 29 25 16 21 19 22 23 11 19 24 5
12
7 12 5 10 8 7 9 7 4 2 11 6
1
1
29
2 21 21 15 17 22 27 20 9 20 29 16 18 17 24 16 25 27 24 7 28 26 10 3 28 23 3 27 16`

type testCase struct {
	n   int
	arr []int
}

// Embedded reference logic from 1352E.go.
func solve(tc testCase) int {
	n := tc.n
	a := tc.arr
	prefix := make([]int, n+1)
	for i := 0; i < n; i++ {
		prefix[i+1] = prefix[i] + a[i]
	}
	seen := make([]bool, n+1)
	for l := 0; l < n; l++ {
		for r := l + 2; r <= n; r++ {
			sum := prefix[r] - prefix[l]
			if sum > n {
				break
			}
			seen[sum] = true
		}
	}
	ans := 0
	for i := 0; i < n; i++ {
		if seen[a[i]] {
			ans++
		}
	}
	return ans
}

func parseTestcases(raw string) ([]testCase, error) {
	sc := bufio.NewScanner(strings.NewReader(raw))
	sc.Split(bufio.ScanWords)
	if !sc.Scan() {
		return nil, fmt.Errorf("empty test data")
	}
	t, err := strconv.Atoi(sc.Text())
	if err != nil {
		return nil, fmt.Errorf("invalid test count")
	}
	tests := make([]testCase, 0, t)
	for i := 0; i < t; i++ {
		if !sc.Scan() {
			return nil, fmt.Errorf("missing n for case %d", i+1)
		}
		n, err := strconv.Atoi(sc.Text())
		if err != nil {
			return nil, fmt.Errorf("invalid n for case %d", i+1)
		}
		arr := make([]int, n)
		for j := 0; j < n; j++ {
			if !sc.Scan() {
				return nil, fmt.Errorf("missing value %d for case %d", j+1, i+1)
			}
			v, err := strconv.Atoi(sc.Text())
			if err != nil {
				return nil, fmt.Errorf("invalid value %d for case %d", j+1, i+1)
			}
			arr[j] = v
		}
		tests = append(tests, testCase{n: n, arr: arr})
	}
	return tests, nil
}

func run(bin, input string) (string, error) {
	var cmd *exec.Cmd
	if strings.HasSuffix(bin, ".go") {
		cmd = exec.Command("go", "run", bin)
	} else {
		cmd = exec.Command(bin)
	}
	cmd.Stdin = strings.NewReader(input)
	var out bytes.Buffer
	var errBuf bytes.Buffer
	cmd.Stdout = &out
	cmd.Stderr = &errBuf
	if err := cmd.Run(); err != nil {
		return "", fmt.Errorf("runtime error: %v\n%s", err, errBuf.String())
	}
	return strings.TrimSpace(out.String()), nil
}

func main() {
	if len(os.Args) != 2 {
		fmt.Println("Usage: go run verifierE.go /path/to/binary")
		os.Exit(1)
	}
	bin := os.Args[1]

	tests, err := parseTestcases(testcasesRaw)
	if err != nil {
		fmt.Fprintln(os.Stderr, "failed to parse tests:", err)
		os.Exit(1)
	}

	var input strings.Builder
	input.WriteString(fmt.Sprintf("%d\n", len(tests)))
	expected := make([]string, 0, len(tests))
	for _, tc := range tests {
		input.WriteString(fmt.Sprintf("%d\n", tc.n))
		for i, v := range tc.arr {
			if i > 0 {
				input.WriteByte(' ')
			}
			input.WriteString(strconv.Itoa(v))
		}
		input.WriteByte('\n')
		expected = append(expected, strconv.Itoa(solve(tc)))
	}

	got, err := run(bin, input.String())
	if err != nil {
		fmt.Fprintln(os.Stderr, "candidate failed:", err)
		os.Exit(1)
	}
	fields := strings.Fields(got)
	if len(fields) != len(expected) {
		fmt.Fprintf(os.Stderr, "wrong number of outputs: expected %d got %d\n", len(expected), len(fields))
		os.Exit(1)
	}
	for i := range expected {
		if fields[i] != expected[i] {
			fmt.Fprintf(os.Stderr, "case %d failed: expected %s got %s\n", i+1, expected[i], fields[i])
			os.Exit(1)
		}
	}
	fmt.Printf("All %d tests passed\n", len(tests))
}
